<api xmlns="http://ws.apache.org/ns/synapse" name="ReservationsAPI" context="/reservations" publishSwagger=" /swagger/reservations.yaml"><resource methods="GET"><inSequence><log level="full"/><call><endpoint><http method="GET" uri-template="http://localhost:3000/reservations"><suspendOnFailure><initialDuration>-1</initialDuration><progressionFactor>1</progressionFactor></suspendOnFailure><markForSuspension><retriesBeforeSuspension>0</retriesBeforeSuspension></markForSuspension></http></endpoint></call><respond/></inSequence><outSequence/><faultSequence/></resource><resource methods="POST" url-mapping="/"><inSequence><log level="full"/><payloadFactory media-type="json"><format>
                    {
                        "numeroChambre": "$1",
                        "numeroCli": "$2",
                        "dateDeb": "$3",
                        "dateFin": "$4"
                    }
                </format><args><arg evaluator="xml" expression="$ctx:numeroChambre"/><arg evaluator="xml" expression="$ctx:numeroCli"/><arg evaluator="xml" expression="$ctx:dateDeb"/><arg evaluator="xml" expression="$ctx:dateFin"/></args></payloadFactory><call><endpoint><http method="POST" uri-template="http://localhost:3000/reservations"><suspendOnFailure><initialDuration>-1</initialDuration><progressionFactor>1</progressionFactor></suspendOnFailure><markForSuspension><retriesBeforeSuspension>0</retriesBeforeSuspension></markForSuspension></http></endpoint></call><respond/></inSequence><outSequence/><faultSequence/></resource><resource methods="GET" uri-template="/{numeroRes}"><inSequence><log level="full"/><property name="numeroRes" expression="get-property('uri.var.numeroRes')" scope="default" type="STRING"/><call><endpoint><http method="GET" uri-template="http://localhost:3000/reservations/{uri.var.numeroRes}"><suspendOnFailure><initialDuration>-1</initialDuration><progressionFactor>1</progressionFactor></suspendOnFailure><markForSuspension><retriesBeforeSuspension>0</retriesBeforeSuspension></markForSuspension></http></endpoint></call><respond/></inSequence><outSequence/><faultSequence/></resource><resource methods="PUT" uri-template="/{numeroRes}"><inSequence><log level="full"/><property name="numeroRes" expression="get-property('uri.var.numeroRes')" scope="default" type="STRING"/><call><endpoint><http method="PUT" uri-template="http://localhost:3000/reservations/{uri.var.numeroRes}"><suspendOnFailure><initialDuration>-1</initialDuration><progressionFactor>1</progressionFactor></suspendOnFailure><markForSuspension><retriesBeforeSuspension>0</retriesBeforeSuspension></markForSuspension></http></endpoint></call><respond/></inSequence><outSequence/><faultSequence/></resource><resource methods="DELETE" uri-template="/{numeroRes}"><inSequence><log level="full"/><property name="numeroRes" expression="get-property('uri.var.numeroRes')" scope="default" type="STRING"/><call><endpoint><http method="DELETE" uri-template="http://localhost:3000/reservations/{uri.var.numeroRes}"><suspendOnFailure><initialDuration>-1</initialDuration><progressionFactor>1</progressionFactor></suspendOnFailure><markForSuspension><retriesBeforeSuspension>0</retriesBeforeSuspension></markForSuspension></http></endpoint></call><respond/></inSequence><outSequence/><faultSequence/></resource></api>